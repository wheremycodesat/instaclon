const addPostButton=document.querySelector(".add-post"),addPostModalBg=document.querySelector(".add-post-modal-div"),addPostModalBody=document.querySelector(".add-post-modal--body"),addPostModalHeader=document.querySelector(".add-post-modal--header"),addPostModal=document.querySelector(".add-post-modal"),uploadPostButton=document.querySelector(".upload-post-btn"),uploadPostInput=document.querySelector(".file-selector"),imageToPost=document.querySelector(".img-post"),arrowLeft=document.querySelector(".arrow-left"),next=document.querySelector(".next-post-step"),post=document.createElement("P"),postInfoDiv=document.querySelector(".upload-new-post-info"),uploadPostForm=document.querySelector(".upload-new-post-form"),caption=document.querySelector(".nice-textarea");let step=1;function displayAddPost(){addPostModalBg.classList.toggle("no-display"),addPostModalBg.classList.toggle("add-post-modal--bg"),document.body.classList.toggle("no-overflow")}function closeAddPost(){restoreAddPostModal(exit=!0),addPostModalBg.classList.toggle("no-display"),addPostModalBg.classList.toggle("add-post-modal--bg"),document.body.classList.toggle("no-overflow")}function manageUpload(e=null){Object.entries(addPostModalBody.children).forEach(o=>{"2"!==o[0]&&"3"!==o[0]&&(o[1].style.display=e?"none":"block")}),imageToPost.classList.toggle("full-width"),imageToPost.classList.toggle("no-display"),arrowLeft.classList.toggle("no-display"),next.classList.toggle("no-display"),postInfoDiv.style.display="none",uploadPostForm.classList.toggle("no-display"),e&&(imageToPost.src=URL.createObjectURL(e))}function restoreToPreview(){addPostModal.style.width=560,addPostModalBody.style.display="flex",addPostModalHeader.append(next),postInfoDiv.style.display="none",imageToPost.classList.toggle("full-width"),imageToPost.classList.toggle("half-post-width"),post.remove()}function restoreAddPostModal(e=null){2===step?e?(manageUpload(),step=1):(manageUpload(),step--):3===step&&(e?(restoreToPreview(),manageUpload(),step=1):(restoreToPreview(),step--))}addPostButton&&addPostButton.addEventListener("click",()=>{displayAddPost()}),addPostModal&&addPostModalBg.addEventListener("click",()=>{closeAddPost()}),addPostButton&&addPostModal.addEventListener("click",e=>{e.stopPropagation()}),uploadPostButton&&uploadPostButton.addEventListener("click",e=>{e.preventDefault(),uploadPostInput.click()}),uploadPostInput&&uploadPostInput.addEventListener("change",e=>{const[o]=uploadPostInput.files;o&&(manageUpload(o),step++)}),arrowLeft&&arrowLeft.addEventListener("click",()=>{restoreAddPostModal()}),next&&next.addEventListener("click",()=>{imageToPost.classList.toggle("full-width"),imageToPost.classList.toggle("half-post-width"),addPostModal.style.width=900,addPostModalBody.style.display="grid",addPostModalBody.style.gridTemplateColumns="2fr 1.5fr",post.classList.add("next-post-step"),post.textContent="Postear",addPostModalHeader.appendChild(post),postInfoDiv.style.display="block",next.remove(),step++}),post&&post.addEventListener("click",()=>{uploadPostForm.appendChild(caption),uploadPostForm.submit(),closeAddPost()});const openChangePic=document.querySelector(".open-change-pic"),changeProfPicBg=document.querySelector(".change-prof-pic--bg"),changeProfPicBody=document.querySelector(".change-prof-pic--body"),cancelUpload=document.querySelector(".cancel-upload-prof"),uploadNewBtn=document.querySelector(".upload-new-prof"),deleteCurrentBtn=document.querySelector(".remove-current-photo"),newProfInput=document.querySelector(".new-prof-input"),changeProfForm=document.querySelector(".change-prof-form");function closeUploadProfModal(){changeProfPicBg.classList.toggle("no-display"),changeProfPicBg.style.display="none"}document.addEventListener("DOMContentLoaded",()=>{openChangePic&&openChangePic.addEventListener("click",e=>{e.preventDefault(),changeProfPicBg.classList.toggle("no-display"),changeProfPicBg.style.display="flex",document.body.style.overflow="hidden"}),changeProfPicBg&&changeProfPicBg.addEventListener("click",closeUploadProfModal),cancelUpload&&cancelUpload.addEventListener("click",closeUploadProfModal),changeProfPicBody&&changeProfPicBody.addEventListener("click",e=>{e.stopPropagation()}),uploadNewBtn&&uploadNewBtn.addEventListener("click",()=>{newProfInput.click()}),deleteCurrentBtn&&deleteCurrentBtn.addEventListener("click",()=>{changeProfForm.action="/edit-profile-pic?delete=1",changeProfForm.submit()}),newProfInput&&newProfInput.addEventListener("change",()=>{changeProfForm.submit()})});const profileBtn=document.querySelector(".profile-icon--btn"),dropdownContent=document.querySelector(".dropdown-content");profileBtn&&profileBtn.addEventListener("click",()=>{dropdownContent.classList.toggle("no-display")});const followBtn=document.querySelector(".follow-btn");function follow(e){let o=new XMLHttpRequest;o.open("POST","/follow?followedUser="+e,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(){location.reload()},o.send()}function unfollow(e){let o=new XMLHttpRequest;o.open("POST","/unfollow?unfollowedUser="+e,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(){location.reload()},o.send()}document.addEventListener("DOMContentLoaded",()=>{followBtn&&followBtn.addEventListener("click",()=>{followBtn.classList.contains("followed")?(followBtn.classList.remove("followed"),unfollow(followBtn.dataset.user)):(followBtn.classList.add("followed"),follow(followBtn.dataset.user))})});const followersList=document.querySelector(".followers-list"),followingList=document.querySelector(".following-list"),followers=document.querySelector(".followers"),following=document.querySelector(".following"),followsModalBody=document.querySelector(".follows-modal__body");function displayFollowersList(){followers.classList.remove("no-display"),followers.style.display="flex",document.body.style.overflow="hidden"}function displayFollowingList(){following.classList.remove("no-display"),following.style.display="flex",document.body.style.overflow="hidden"}function closeFollowersModal(){followers.classList.add("no-display"),followers.style.display="none",document.body.style.overflow="visible"}function closeFollowingModal(){following.classList.add("no-display"),following.style.display="none",document.body.style.overflow="visible"}document.addEventListener("DOMContentLoaded",()=>{followersList&&followersList.addEventListener("click",()=>{displayFollowersList()}),followingList&&followingList.addEventListener("click",()=>{displayFollowingList()}),followers&&followers.addEventListener("click",()=>{closeFollowersModal()}),following&&following.addEventListener("click",()=>{closeFollowingModal()}),followsModalBody&&followsModalBody.addEventListener("click",e=>{e.stopPropagation()})});const likeIcons=document.querySelectorAll(".like-icon");function likePost(e){let o=new XMLHttpRequest;o.open("POST","/like?oid="+e,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(){location.reload()},o.send()}function dislikePost(e){let o=new XMLHttpRequest;o.open("POST","/dislike?oid="+e,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(){location.reload()},o.send()}
/*! modernizr 3.6.0 (Custom Build) | MIT *
 * https://modernizr.com/download/?-webp-setclasses !*/document.addEventListener("DOMContentLoaded",()=>{likeIcons.forEach(e=>{e.addEventListener("click",()=>{e.classList.contains("liked")?(e.classList.remove("liked"),dislikePost(e.dataset.oid)):(e.classList.add("liked"),likePost(e.dataset.oid))})})}),function(e,o,t){function n(e,o){return typeof e===o}function s(e){var o=u.className,t=i._config.classPrefix||"";if(p&&(o=o.baseVal),i._config.enableJSClass){var n=new RegExp("(^|\\s)"+t+"no-js(\\s|$)");o=o.replace(n,"$1"+t+"js$2")}i._config.enableClasses&&(o+=" "+t+e.join(" "+t),p?u.className.baseVal=o:u.className=o)}function l(e,o){if("object"==typeof e)for(var t in e)c(e,t)&&l(t,e[t]);else{var n=(e=e.toLowerCase()).split("."),d=i[n[0]];if(2==n.length&&(d=d[n[1]]),void 0!==d)return i;o="function"==typeof o?o():o,1==n.length?i[n[0]]=o:(!i[n[0]]||i[n[0]]instanceof Boolean||(i[n[0]]=new Boolean(i[n[0]])),i[n[0]][n[1]]=o),s([(o&&0!=o?"":"no-")+n.join("-")]),i._trigger(e,o)}return i}var d=[],a=[],r={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,o){var t=this;setTimeout((function(){o(t[e])}),0)},addTest:function(e,o,t){a.push({name:e,fn:o,options:t})},addAsyncTest:function(e){a.push({name:null,fn:e})}},i=function(){};i.prototype=r,i=new i;var c,u=o.documentElement,p="svg"===u.nodeName.toLowerCase();!function(){var e={}.hasOwnProperty;c=n(e,"undefined")||n(e.call,"undefined")?function(e,o){return o in e&&n(e.constructor.prototype[o],"undefined")}:function(o,t){return e.call(o,t)}}(),r._l={},r.on=function(e,o){this._l[e]||(this._l[e]=[]),this._l[e].push(o),i.hasOwnProperty(e)&&setTimeout((function(){i._trigger(e,i[e])}),0)},r._trigger=function(e,o){if(this._l[e]){var t=this._l[e];setTimeout((function(){var e;for(e=0;e<t.length;e++)(0,t[e])(o)}),0),delete this._l[e]}},i._q.push((function(){r.addTest=l})),i.addAsyncTest((function(){function e(e,o,t){function n(o){var n=!(!o||"load"!==o.type)&&1==s.width;l(e,"webp"===e&&n?new Boolean(n):n),t&&t(o)}var s=new Image;s.onerror=n,s.onload=n,s.src=o}var o=[{uri:"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",name:"webp"},{uri:"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",name:"webp.alpha"},{uri:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA",name:"webp.animation"},{uri:"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",name:"webp.lossless"}],t=o.shift();e(t.name,t.uri,(function(t){if(t&&"load"===t.type)for(var n=0;n<o.length;n++)e(o[n].name,o[n].uri)}))})),function(){var e,o,t,s,l,r;for(var c in a)if(a.hasOwnProperty(c)){if(e=[],(o=a[c]).name&&(e.push(o.name.toLowerCase()),o.options&&o.options.aliases&&o.options.aliases.length))for(t=0;t<o.options.aliases.length;t++)e.push(o.options.aliases[t].toLowerCase());for(s=n(o.fn,"function")?o.fn():o.fn,l=0;l<e.length;l++)1===(r=e[l].split(".")).length?i[r[0]]=s:(!i[r[0]]||i[r[0]]instanceof Boolean||(i[r[0]]=new Boolean(i[r[0]])),i[r[0]][r[1]]=s),d.push((s?"":"no-")+r.join("-"))}}(),s(d),delete r.addTest,delete r.addAsyncTest;for(var f=0;f<i._q.length;f++)i._q[f]();e.Modernizr=i}(window,document);const searchInput=document.querySelector(".search"),searchList=document.querySelector(".search-dropdown-list"),searchDrpd=document.querySelector(".search-dropdown"),closeSearch=document.querySelector(".close-search");document.addEventListener("DOMContentLoaded",()=>{searchInput&&(searchInput.addEventListener("focus",()=>{closeSearch.classList.remove("no-display")}),searchInput.addEventListener("input",e=>{searchList.innerHTML="",searchDrpd.classList.remove("no-display");let o=new XMLHttpRequest;o.open("POST","/get-users?filter="+searchInput.value,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onload=function(){let e=[];lista=this.responseText.split(", "),lista.forEach(o=>{let t=o.split("'")[1];e.push(t)}),e.forEach(e=>{if(e){const o=document.createElement("li"),t=document.createElement("a"),n=document.createElement("img");n.src=`/static/fotos_perfil/${e}_prof.jpg`,n.classList.add("search-user-img"),t.href="/profile/"+e,t.classList.add("search-link"),t.textContent=e,o.classList.add("search-list__li"),o.appendChild(n),o.appendChild(t),searchList.appendChild(o)}else{const e=document.createElement("li");e.textContent="Usuario no encontrado",searchList.appendChild(e)}})},o.send()})),closeSearch&&closeSearch.addEventListener("click",()=>{searchDrpd.classList.add("no-display"),closeSearch.classList.add("no-display"),searchInput.value="",searchList.innerHTML=""})});const overlays=document.querySelectorAll(".overlay"),postModalBgs=document.querySelectorAll(".post-modal-div"),postModal=document.querySelector(".post-modal"),images=document.querySelectorAll(".profile__posts__imagetag"),closes=document.querySelectorAll(".close-modal"),commentBtns=document.querySelectorAll(".comment-icon"),viewComments=document.querySelectorAll(".view-comments"),deletePostIcons=document.querySelectorAll(".delete-post-icon"),deletePostDrops=document.querySelectorAll(".delete-post-dropdown"),removePosts=document.querySelectorAll(".remove-post"),deletePostForm=document.querySelector(".delete-post-form");document.addEventListener("DOMContentLoaded",()=>{overlays.forEach(e=>{const o=e.dataset.index;e.addEventListener("click",()=>{postModalBgs[o].style.display="flex",document.body.style.overflow="hidden"})}),commentBtns.forEach(e=>{const o=e.dataset.index;e.addEventListener("click",()=>{postModalBgs[o].style.display="flex",document.body.style.overflow="hidden"})}),viewComments.forEach(e=>{const o=e.dataset.index;e.addEventListener("click",()=>{postModalBgs[o].style.display="flex",document.body.style.overflow="hidden"})}),closes.forEach(e=>{const o=e.dataset.index;e.addEventListener("click",()=>{postModalBgs[o].style.display="none",document.body.style.overflow="visible"})}),deletePostIcons.forEach(e=>{e.addEventListener("click",()=>{deletePostDrops[e.dataset.index].classList.toggle("no-display")})})}),postModal&&postModal.addEventListener("click",e=>{e.stopPropagation()}),removePosts&&removePosts.forEach(e=>{e.addEventListener("click",()=>{deletePostForm.submit()})});const loginForm=document.querySelector(".login-container__form"),editProfileForm=document.querySelector(".edit-profile-form"),editPassForm=document.querySelector(".edit-password-form"),username=document.querySelector(".login-username"),password=document.querySelector(".login-password"),submitBtn=document.querySelector(".submit-btn"),editUsername=document.querySelector(".edit-username"),editAlias=document.querySelector(".edit-alias"),editBio=document.querySelector(".edit-bio"),editOldPassword=document.querySelector(".edit-opassword"),editNewPassword=document.querySelector(".edit-npassword"),editRNewPassword=document.querySelector(".edit-rnpassword");document.addEventListener("DOMContentLoaded",()=>{loginForm&&loginForm.addEventListener("submit",()=>{let e=new XMLHttpRequest;params="username="+username.value+"&password="+password.value,e.open("POST","/login",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.onload=function(){},e.send(params)}),editProfileForm&&editProfileForm.addEventListener("submit",()=>{let e=new XMLHttpRequest;params="alias="+editUsername.value+"&username="+editUsername.value+"&bio="+editBio.value,e.open("POST","/edit-profile",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.onload=function(){},e.send(params)}),editPassForm&&editPassForm.addEventListener("submit",()=>{let e=new XMLHttpRequest;params="opassword="+editOldPassword.value+"&npassword="+editNewPassword.value+"&rnpassword="+editRNewPassword.value,e.open("POST","/edit-password",!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.onload=function(){},e.send(params)})});
//# sourceMappingURL=bundle.js.map
